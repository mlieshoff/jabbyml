#set($H="#")
[![](https://img.shields.io/badge/java-packagecloud.io-844fec.svg)](https://packagecloud.io/)
[![Nightlies](https://github.com/mlieshoff/jabbyml/actions/workflows/nightlies.yml/badge.svg)](https://github.com/mlieshoff/jabbyml/actions/workflows/nightlies.yml)

# jabbyml ${replacer.getVersion()}
A Java Wrapper For TabbyML Server API

$H$H Why we don't use the Swagger scheme?

A big sorry for that, but the quality of that scheme changes from day to day.
Another big sorry, but the OpenApi Java generator is producing code quality we like much.
That's simple why :) If you think the same way (it may differ from case to case of course), feel free to continue using our wrapper.

$H$H Why we moved to the amazing services of packagecloud?

We moved to packagecloud.io because the bintray closed their nice hosting... And packagecloud.io is a really nice place to be :)

$H$H Join us on Discord

https://discord.gg/WNb5c8hn

$H$H Simplest Usage

Note: Please combine the builder methods as it makes sense. The demonstrated is showing only all possibilities.
For more information please check

https://tabby.tabbyml.com/api

Use one of these endpoints:

Official endpoint
```
    https://my_host_with_tabbml_server:8080/
```

Use built-in standard connector
```java
Connector connector = new StandardConnector();
```

or use the new filesystem cached connector
```java
Connector connector = new FilesystemCachedConnector("jabbyml")
```

or use custom implementation
```java
    Connector connector = new Connector() {
        @Override
        public <T extends IResponse> T get(RequestContext requestContext) throws ConnectorException {
                // do not forget to use auth header with *Bearer*
                String authHeader =  "Authorization: Bearer " + requestContext.getApiKey();
            }
        }
    );
```

connect to the api with creating a *jabbyML* instance.
```java
    JabbyML jabbyML = new JabbyML("https://bsproxy.royaleapi.dev/v1", "my-api-key", connector);
```

list all supported apis
```java
    System.out.println(jabbyML.listApis());
```

$H$H$H List of APIs and example usages

#foreach( $entity in $object )
    #set($apiName="${entity.name}Api")
$H$H$H$H ${apiName}
```java
    // create an instance for the api
    ${apiName} api = jabbyML.getApi(${apiName}.class);
```
    #foreach( $method in $entity.method )
        #set($parameter=$method.attribute.get(0))
        #set($requestObject=${helper.getEntity($method.scope, $parameter.type)})
        #set($requestName=${parameter.name})
        #set($packagePrefix=${replacer.getPackageNamePrefix($properties, $method.scope, $parameter.type)})
        #set($methodName=${replacer.getMethodName($method.name)})
```java
    // ${method.name}
    ${method.return} response = api.${method.name}(${requestName}.builder()
       #foreach($attribute in $requestObject.attribute)
           .${attribute.name}()
       #end
           // store raw response
           .storeRawResponse()
        .build()
    ).get();
```
    #end
#end

$H$H Add or replace registered API's

```java
    JabbyML jabbyML = new JabbyML(...);
    jabbyML.register(MyApi.class, MyApiImpl.class.getName());
    MyApi myApi = jabbyML.getApi(MyApi.class);
    GoodiesResponse goodiesResponse = myApi.findAllGoodies(new GoodiesRequest(...))).get();
```

Custom API implementations just need to inherit from *BaseApi*.

$H$H Asynchronous usage

All requests are returning *java.concurrent.Future*. The execution will be asynchronous by default.

$H$H How to bind the packagecloud repository

```xml
    <repositories>
        <repository>
            <id>packagecloud-jabbyml</id>
            <url>https://packagecloud.io/mlieshoff/jabbyml/maven2</url>
            <releases>
                <enabled>true</enabled>
            </releases>
            <snapshots>
                <enabled>true</enabled>
            </snapshots>
        </repository>
    </repositories>
```

$H$H Add dependency

to Gradle:
```groovy
    implementation group: 'jabbyml', name: 'jabbyml', version: '${replacer.getVersion()}'
```

to Maven:
```xml
    <dependency>
        <groupId>jabbyml</groupId>
        <artifactId>jabbyml</artifactId>
        <version>${replacer.getVersion()}</version>
    </dependency>
```

$H$H Continuous Integration

https://github.com/mlieshoff/jabbyml/actions

$H$H Repository

https://packagecloud.io/mlieshoff/jabbyml

$H$H Logging

We are using SLF4j.

$H$H Usage of RoyaleApi proxy

This wrapper can be easyly connected to the proxy of our friends on RoyaleAPI. Please proceed first the steps described here:

https://docs.royaleapi.com/#/proxy

Then initialize an instance of class Api like that:

```java
    JabbyML jabbyML = new JabbyML("https://bsproxy.royaleapi.dev/v1", API_KEY, CONNECTOR);
```

That's all, enjoy :)

$H$H Contributing

1. Set up the formatting hook, via copying the files under ./jabbyml/hooks to ./jabbyml/.git/hooks